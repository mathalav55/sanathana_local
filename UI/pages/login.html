<!DOCTYPE html>
<!-- saved from url=(0125)https://www.pixinvent.com/demo/frest-clean-bootstrap-admin-dashboard-template/html/ltr/vertical-menu-template/auth-login.html -->
<html class="loaded" lang="en" data-textdirection="ltr">
<!-- BEGIN: Head-->

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
    <meta name="description" content="Frest admin is super flexible, powerful, clean &amp; modern responsive bootstrap 4 admin template with unlimited possibilities.">
    <meta name="keywords" content="admin template, Frest admin template, dashboard template, flat admin template, responsive admin template, web app">
    <meta name="author" content="PIXINVENT">
    <title>Login Page</title>
    <link rel="apple-touch-icon" href="https://www.pixinvent.com/demo/frest-clean-bootstrap-admin-dashboard-template/app-assets/images/ico/apple-icon-120.png">
    <link rel="shortcut icon" type="image/x-icon" href="https://www.pixinvent.com/demo/frest-clean-bootstrap-admin-dashboard-template/app-assets/images/ico/favicon.ico">
    <link href="../../css/css" rel="stylesheet">

    <!-- BEGIN: Vendor CSS-->
    <link rel="stylesheet" type="text/css" href="../../css/vendors.min.css">
    <!-- END: Vendor CSS-->

    <!-- BEGIN: Theme CSS-->
    <link rel="stylesheet" type="text/css" href="../../css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="../../css/bootstrap-extended.min.css">
    <link rel="stylesheet" type="text/css" href="../../css/colors.min.css">
    <link rel="stylesheet" type="text/css" href="../../css/components.min.css">
    <link rel="stylesheet" type="text/css" href="../../css/dark-layout.min.css">
    <link rel="stylesheet" type="text/css" href="../../css/semi-dark-layout.min.css">
    <!-- END: Theme CSS-->

    <!-- BEGIN: Page CSS-->
    <link rel="stylesheet" type="text/css" href="../../css/vertical-menu.min.css">
    <link rel="stylesheet" type="text/css" href="../../css/authentication.css">
    <!-- END: Page CSS-->

    <!-- BEGIN: Custom CSS-->
    <link rel="stylesheet" type="text/css" href="../../css/style.css">
    <!-- END: Custom CSS-->

    <script data-dapp-detection="">
        ! function() {
            let e = !1;

            function n() {
                if (!e) {
                    const n = document.createElement("meta");
                    n.name = "dapp-detected", document.head.appendChild(n), e = !0
                }
            }
            if (window.hasOwnProperty("ethereum")) {
                if (window.__disableDappDetectionInsertion = !0, void 0 === window.ethereum) return;
                n()
            } else {
                var t = window.ethereum;
                Object.defineProperty(window, "ethereum", {
                    configurable: !0,
                    enumerable: !1,
                    set: function(e) {
                        window.__disableDappDetectionInsertion || n(), t = e
                    },
                    get: function() {
                        if (!window.__disableDappDetectionInsertion) {
                            const e = arguments.callee;
                            e && e.caller && e.caller.toString && -1 !== e.caller.toString().indexOf("getOwnPropertyNames") || n()
                        }
                        return t
                    }
                })
            }
        }();
    </script>
    <script>
        function authFunction(){
            //authentication
            //if alreday logged in redirect to main page
            var myHeaders = new Headers();
            var authRequestOptions = {
                method : "POST",
                redirect : "follow",
                headers : myHeaders,
                body : ""
            }
            fetch("../../ws/auth.php",authRequestOptions)
            .then(response => response.json()).
            then(result => {
                console.log(result);
                if(result.status == "Logged In"){
                    //redirect to dashboard page
                    window.open("./admin.html",'_self');
                }
            })
            .catch(error =>{console.log(error);});
        }
        authFunction();
    </script>
</head>
<!-- END: Head-->

<!-- BEGIN: Body-->

<body class="vertical-layout 1-column navbar-sticky footer-static bg-full-screen-image blank-page pace-done vertical-overlay-menu menu-hide" data-open="click" data-menu="vertical-menu-modern" data-col="1-column" style="overflow: auto;">
    <div class="pace  pace-inactive">
        <div class="pace-progress" data-progress-text="100%" data-progress="99" style="transform: translate3d(100%, 0px, 0px);">
            <div class="pace-progress-inner"></div>
        </div>
        <div class="pace-activity"></div>
    </div>
    <!-- BEGIN: Content-->
    <div class="app-content content">
        <div class="content-overlay"></div>
        <div class="content-wrapper">
            <div class="content-header row">
            </div>
            <div class="content-body">
                <!-- login page start -->
                <section id="auth-login" class="row flexbox-container">
                    <div class="col-xl-8 col-11">
                        <div class="card bg-authentication mb-0">
                            <div class="row m-0">
                                <!-- left section-login -->
                                <div class="col-md-6 col-12 px-0">
                                    <div class="card disable-rounded-right mb-0 p-2 h-100 d-flex justify-content-center">
                                        <div class="card-header pb-1">
                                            <div class="card-title">
                                                <h4 class="text-center mb-2">Welcome Back</h4>
                                            </div>
                                        </div>
                                        <div class="card-body">
                                            <form>
                                                <div class="form-group mb-50">
                                                    <label class="text-bold-600" for="phoneNumber">Phone Number</label>
                                                    <input  title="Please enter valid phone number" class="form-control" id="phoneNumber" placeholder="Phone Number"></div>
                                                <div class="form-group">
                                                    <label class="text-bold-600" for="inputPassword1">Password</label>
                                                    <input type="password" class="form-control" id="inputPassword" placeholder="Password">
                                                </div>
                                                <div class="form-group d-flex flex-md-row flex-column justify-content-between align-items-center">
                                                    <div class="text-left">
                                                        <div >
                                                            <span style="color: #f00;" id="error"></span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <button type="submit" id="submit-btn" class="btn btn-primary glow w-100 position-relative">Login<i id="icon-arrow" class="bx bx-right-arrow-alt"></i></button>
                                            </form>
                                            <hr>
                                            <div class="text-center"><small class="mr-25">Don't have an account?</small><a href="javascript:void(0)"><small>Sign up</small></a></div>
                                        </div>
                                    </div>
                                </div>
                                <!-- right section image -->
                                <div class="col-md-6 d-md-block d-none text-center align-self-center p-3">
                                    <img class="img-fluid" src="../../images/login.png" alt="branding logo">
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                <!-- login page ends -->

            </div>
        </div>
    </div>
    <!-- END: Content-->


    <!-- BEGIN: Vendor JS-->
    <script src="../../js/vendors.min.js"></script>
    <script src="../../js/LivIconsEvo.tools.min.js"></script>
    <script src="../../js/LivIconsEvo.defaults.min.js"></script>
    <script src="../../js/LivIconsEvo.min.js"></script>
    <!-- BEGIN Vendor JS-->

    <!-- BEGIN: Page Vendor JS-->
    <!-- END: Page Vendor JS-->

    <!-- BEGIN: Theme JS-->
    <script src="../../js/vertical-menu-light.min.js"></script>
    <script src="../../js/app-menu.min.js"></script>
    <script src="../../js/app.min.js"></script>
    <script src="../../js/components.min.js"></script>
    <script src="../../js/footer.min.js"></script>
    <!-- END: Theme JS-->

    <!-- BEGIN: Page JS-->
    <!-- END: Page JS-->

    <script>
        var myHeaders = new Headers();
        var submitBtn = document.getElementById("submit-btn");
        submitBtn.addEventListener("click",(event)=>{
            event.preventDefault();
            authnetication();
        });
        function authnetication(){
            var formData = {
                username : document.getElementById("phoneNumber").value,
                password : document.getElementById("inputPassword").value,
            }
            console.log(formData);
            formData = JSON.stringify(formData);
            var formRequestOptions = {
                headers : myHeaders,
                method : "POST",
                redirect : "follow",
                body : formData
            }
            fetch("../../ws/login.php",formRequestOptions)
            .then(response => response.json())
            .then( result =>{
                console.log(result);
                if( Array.isArray(result)){
                    var usrData = result[0];
                    var name = usrData.Name;
                    //send profile data to local storage
                    localStorage.setItem('name',name);
                    document.getElementById("error").innerHTML ="";
                    //open main page
                    window.open("./admin.html",'_self');
                }else{
                    //login failure
                    //display loginError message
                    var errroMessage = "Inavid User Id or Password";
                    document.getElementById("error").innerHTML = errroMessage;
                }
            })
            .catch(error =>{
                console.log(error);
                var errroMessage = "There was error logging you ";
                document.getElementById("error").innerHTML = errroMessage;
            })
        }
    </script>
    <!-- END: Body-->
</body>

</html>