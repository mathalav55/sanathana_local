<!DOCTYPE html>
<!-- saved from url=(0128)https://www.pixinvent.com/demo/frest-clean-bootstrap-admin-dashboard-template/html/ltr/horizontal-menu-template/form-layout.html -->
<html class="loaded" lang="en" data-textdirection="ltr">
<!-- BEGIN: Head-->

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
    <meta name="description" content="Frest admin is super flexible, powerful, clean &amp; modern responsive bootstrap 4 admin template with unlimited possibilities.">
    <meta name="keywords" content="admin template, Frest admin template, dashboard template, flat admin template, responsive admin template, web app">
    <meta name="author" content="PIXINVENT">
    <title>Main Page</title>
    <link rel="apple-touch-icon" href="https://www.pixinvent.com/demo/frest-clean-bootstrap-admin-dashboard-template/app-assets/images/ico/apple-icon-120.png">
    <link rel="shortcut icon" type="image/x-icon" href="https://www.pixinvent.com/demo/frest-clean-bootstrap-admin-dashboard-template/app-assets/images/ico/favicon.ico">
    <link href="../../css/css"rel=" stylesheet ">

    <!-- BEGIN: Vendor CSS-->
    <link rel="stylesheet " type="text/css " href="../../css/vendors.min.css ">
    <!-- END: Vendor CSS-->

    <!-- BEGIN: Theme CSS-->
    <link rel="stylesheet " type="text/css " href="../../css/Form Layouts - Frest - Bootstrap HTML admin template_files/bootstrap.min.css ">
    <link rel="stylesheet " type="text/css " href="../../css/Form Layouts - Frest - Bootstrap HTML admin template_files/bootstrap-extended.min.css ">
    <link rel="stylesheet " type="text/css " href="../../css/Form Layouts - Frest - Bootstrap HTML admin template_files/colors.min.css ">
    <link rel="stylesheet " type="text/css " href="../../css/Form Layouts - Frest - Bootstrap HTML admin template_files/components.min.css ">
    <link rel="stylesheet " type="text/css " href="../../css/Form Layouts - Frest - Bootstrap HTML admin template_files/dark-layout.min.css ">
    <link rel="stylesheet " type="text/css " href="../../css/Form Layouts - Frest - Bootstrap HTML admin template_files/semi-dark-layout.min.css ">
    <!-- END: Theme CSS-->

    <!-- BEGIN: Page CSS-->
    <link rel="stylesheet " type="text/css " href="../../css/horizontal-menu.min.css ">
    <!-- END: Page CSS-->

    <!-- BEGIN: Custom CSS-->
    <link rel="stylesheet " type="text/css " href="../../css/style.css ">
    <!-- END: Custom CSS-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons " rel="stylesheet ">

    <link rel="apple-touch-icon " href="../../app-assets/images/ico/apple-icon-120.png ">
    <link rel="shortcut icon " type="image/x-icon " href="../../app-assets/images/ico/favicon.ico ">
    <link href="https://fonts.googleapis.com/css?family=Rubik:300,400,500,600%7CIBM+Plex+Sans:300,400,500,600,700 " rel="stylesheet ">


    <link rel="stylesheet " type="text/css " href="../../app-assets/vendors/css/vendors.min.css ">
    <link rel="stylesheet " type="text/css " href="../../app-assets/vendors/css/charts/apexcharts.css ">
    <link rel="stylesheet " type="text/css " href="../../app-assets/vendors/css/extensions/swiper.min.css ">
    <link rel="stylesheet " href="../../css/font-awesome-4.7.0/css/font-awesome.min.css ">



    <link rel="stylesheet " type="text/css " href="../../app-assets/css/bootstrap.css ">
    <link rel="stylesheet " type="text/css " href="../../app-assets/css/bootstrap-extended.css ">
    <link rel="stylesheet " type="text/css " href="../../app-assets/css/colors.css ">
    <link rel="stylesheet " type="text/css " href="../../app-assets/css/components.css ">


    <link rel="stylesheet " type="text/css " href="../../app-assets/css/core/menu/menu-types/horizontal-menu.css ">
    <link rel="stylesheet " type="text/css " href="../../app-assets/css/pages/dashboard-ecommerce.css ">





    <link rel="icon " href="../../img/core-img/favicon.png " />


    <link rel="stylesheet " href="../../css/responsive.css " />

    <link rel="stylesheet " type="text/css " href="../../css/custom.css " />


    <script src="../../js/modernizr.js "></script>
    




</head>
<!-- END: Head-->

<style>
    body {
        font-family: Arial, Helvetica, sans-serif;
    }
    /* The Modal (background) */
    
    .modal {
        display: none;
        /* Hidden by default */
        position: fixed;
        /* Stay in place */
        z-index: 1;
        /* Sit on top */
        padding-top: 100px;
        /* Location of the box */
        left: 0;
        top: 0;
        width: 100%;
        /* Full width */
        height: 100%;
        /* Full height */
        /* Enable scroll if needed */
        background-color: rgb(0, 0, 0);
        /* Fallback color */
        background-color: rgba(0, 0, 0, 0.4);
        /* Black w/ opacity */
    }
    /* Modal Content */
    
    .modal-content {
        background-color: #fefefe;
        margin: auto;
        padding: 20px;
        border: 1px solid #888;
        width: 80%;
        height: 100%;
    }
    /* The Close Button */
    
    .close {
        color: #aaaaaa;
        float: right;
        font-size: 28px;
        font-weight: bold;
    }
    
    .close:hover,
    .close:focus {
        color: #000;
        text-decoration: none;
        cursor: pointer;
    }
    #addForm{
        display: none;
    }
    #list-view{
        display: none;
    }
    .material-icons.active{
        color: #5a8dee;
    }
    .material-icons.inactive{
        color : #c7c7c7;
    }
</style>

<!-- BEGIN: Body-->

<body class="horizontal-layout navbar-static 2-columns footer-static pace-done menu-expanded horizontal-menu " data-open="hover " data-menu="horizontal-menu " data-col="2-columns ">


    <header class="headroom mb-4" >

        <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top ">
            <a href="./admin.html "><img src="../../img/bg-img/logo.png " class="img-fluid logo-width " alt="Brand Logo " /></a>
            <button class="navbar-toggler " type="button " data-toggle="collapse " data-target="#navbarsExampleDefault " aria-controls="navbarsExampleDefault " aria-expanded="false " aria-label="Toggle navigation ">
        <span class="navbar-toggler-icon "></span>
      </button>

            <div class="collapse navbar-collapse " id="navbarsExampleDefault ">
                <ul class="navbar-nav mr-auto " id="Tnavlist ">

                </ul>
                <ul class="float-right navbar-nav" id="profileContainer">

                </ul>
                    

            </div>
        </nav>


    </header>





   <div id="dash-section" class="mt-4">
    <div class="row ">
        <div class="col-6 ">
            <div class="col-12 ">
                <div class="card text-left " style="margin-bottom: 10px;">
                    <div class="card-body py-1 ">
                        <div class="">
                            <a href="./member_form.html" style="cursor: pointer; ">
                                <span class="material-icons onlyAdmin">
                                add
                                </span></a>
                            <a href="./searchmembers.html" style="cursor: pointer; margin-left: 20px; ">
                                <span class="material-icons ">
                                border_all
                                </span></a>
                            <h3 style="display: inline; float: right ">Members</h3>
                        </div>
                        <div class="row">
                            <div class="col-6 dashboard-users-success ">
                                <div class="card text-center ">
                                    <div class="card-body py-1 ">
                                        <div class="text-muted line-ellipsis ">Active</div>
                                        <h3 id="activeMembers" class="mb-0 ">0</h3>
                                    </div>
                                </div>
                            </div>
                            <div class="col-6 dashboard-users-success ">
                                <div class="card text-center ">
                                    <div class="card-body py-1 ">
                                        <div class="text-muted line-ellipsis ">inActive</div>
                                        <h3 id="inactiveMembers" class="mb-0 ">0</h3>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
        </div>
        <div class="col-6 ">
            <div id="dbFields " class="col-12 ">
                <div class="card text-right " style="margin-bottom: 10px; ">
                    <div class="card-body py-1 ">
                        <h3 style="display: inline; float: left ">Member</h3>
                        <a href="# " style="cursor: pointer; ">
                            <span class="material-icons ">
                            add
                            </span></a>
                        <a href="# " style="cursor: pointer; margin-left: 20px; ">
                            <span class="material-icons ">
                            border_all
                            </span></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
   </div>
    <div id="addForm">
        <section id="">
            <div class="row match-height justify-content-center">
              <div class="col-8">
                <div class="card">
                  <div class="card-header justify-content-center" id="form_heading">
                    <h3 class="card-title"></h3>
                  </div>
                  <div class="card-body">
                    <form class="form" id="form">
                      <div class="form-body">
                        <div class="row">
                          <div class="col-md-6 col-12">
                            <div class="form-label-group">
                              <input type="text" id="contentName" class="form-control" placeholder="Content Name"
                                >
                              <label for="contentName">Content Name</label>
                            </div>
                          </div>
                          <div class="col-md-6 col-12">
                            <div class="form-label-group">
                              <input type="text" id="aliasName" class="form-control" placeholder="Alias Name"
                                >
                              <label for="aliasName">Alias Name</label>
                            </div>
                          </div>
                          <div class="col-md-6 col-12">
                            <div class="form-label-group">
                              <input type="text" id="urlColumn" class="form-control" placeholder="URl Redirection">
                              <label for="urlColumn">URL Redirection</label>
                            </div>
                          </div>
                          <div class="col-md-6 col-12">
                            <div class="form-label-group">
                              <input type="file" id="iconPath" class="form-control"
                                placeholder="Upload Icon" name="iconUpload">
                              <label for="iconPath">Icon</label>
                            </div>
                          </div>
                          <div class="col-md-6 col-12">
                            <div class="form-label-group">
                              <input type="text" id="header" class="form-control" 
                                placeholder="Header">
                              <label for="header">Header</label>
                            </div>
                          </div>
                          <div class="col-md-6 col-12">
                            <div class="form-label-group">
                              <input type="text" id="content" class="form-control" 
                                placeholder="Content">
                                <label for="content">Content</label>
                            </div>
                          </div>
                          <div class="col-md-6 col-12">
                            <div class="form-label-group">
                                <input type="file" id="imagePath" class="form-control" 
                                  placeholder="Upload Image" name="imageUpload">
                                <label for="imagePath">Image</label>
                              </div>
                          </div>
                          <div class="col-md-6 col-12">
                            <div class="form-label-group">
                                <input type="file" id="emptyImagePath" class="form-control" 
                                  placeholder="Upload Image" name="imageUpload">
                                <label for="emptyImagePath">Empty Image</label>
                              </div>
                          </div>
                          <div class="col-md-6 col-12">
                            <div class="form-label-group">
                                <input type="file" id="videoPath" class="form-control" 
                                  placeholder="Upload Video" name="videUpload">
                                  <label for="videoPath">Video</label>
                              </div>
                          </div>
                          <div class="col-md-6 col-12">
                            <label for="">Status</label>
                            <div class="form-label-group">
                                <li class="d-inline-block mr-2 mb-1">
                                    <fieldset>
                                      <div class="radio">
                                        <input type="radio" name="status" id="radio1" checked>
                                        <label for="radio1">Active</label>
                                      </div>
                                    </fieldset>
                                  </li>
                                  <li class="d-inline-block mr-2 mb-1">
                                    <fieldset>
                                      <div class="radio">
                                        <input type="radio" name="status" id="radio2">
                                        <label for="radio2">Inactive</label>
                                      </div>
                                    </fieldset>
                                  </li>
                            </div>
                          </div>
                          
                          <div class="col-12 d-flex justify-content-end">
                            <button type="submit" class="btn btn-primary mr-1" id="save-btn">Save</button>
                            <button type="reset" class="btn btn-light-secondary" id="reset-btn" >Reset</button>
                          </div>
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
                <div class="row justify-content-start">
                    <button type="reset" class="btn btn-primary" onclick="openDashSection()">Back</button>
                </div>
              </div>
            </div>
          </section>    
    </div>
    </div>
    <div id="list-view" class="row justify-content-center">
        <div class="card-header row justify-content-center" id="list-view-title">
            <h3 class="card-title">Header</h3>
        </div>
        <div class="row justify-content-center">
        <div id="dbFieldData" class="col-md-6 col-12 justify-content-center">
            <div class="card text-right " style="margin-bottom: 10px; ">
                <div class="card-body py-1 ">
                    <h3 style="display: inline; float: left ">No Data</h3>
                    <a href="# " style="cursor: pointer; margin-left: 20px; ">
                        <span class="material-icons ">
                        edit
                        </span></a>
                </div>
            </div>
        </div>
        
    </div>
    <div class="row justify-content-center" >
        <div class="col-md-6 col-12 ">
            <button type="reset" class="btn btn-primary" onclick="openDashSection()">Back</button>
        </div>
    </div>
    </div>
    <script src="../../js/jquery-2.2.4.min.js "></script>

    <script src="../../js/headroom.js "></script>

    <script src="../../js/popper.min.js "></script>

    <script src="../../js/bootstrap.min.js "></script>

    <script src="../../js/plugins.js "></script>

    <script src="../../js/active.js "></script>

    <script src="../../js/jquery.mobile.custom.min.js "></script>

    <script src="../../js/main.js "></script>

    <script src="../../app-assets/vendors/js/vendors.min.js "></script>
    <script src="../../app-assets/fonts/LivIconsEvo/js/LivIconsEvo.tools.js "></script>
    <script src="../../app-assets/fonts/LivIconsEvo/js/LivIconsEvo.defaults.js "></script>
    <script src="../../app-assets/fonts/LivIconsEvo/js/LivIconsEvo.min.js "></script>

    <script src="../../app-assets/vendors/js/ui/jquery.sticky.js "></script>

    <script src="../../app-assets/js/scripts/configs/horizontal-menu.js "></script>
    <script src="../../app-assets/js/core/app-menu.js "></script>
    <script src="../../app-assets/js/core/app.js "></script>
    <script src="../../app-assets/js/scripts/components.js "></script>
    <script src="../../app-assets/js/scripts/footer.js "></script>
    <script src="../../js/globalFuntions.js"></script>
    





</body>

<script>
var myHeaders = new Headers();
// myHeaders.append("Content-Type ", "text/plain ");
// myHeaders.append("Cookie ", "PHPSESSID=a147dbe2815c8b7145c6f2ca214f3716 "); 
  function adminRedirect(){
    var userData = {};
    var authRequestOptions = {
    method : "POST",
    redirect : "follow",
    headers : myHeaders,
    body : ""
    }
    fetch("../../ws/auth.php",authRequestOptions)
    .then(response => response.json())
    .then(result => {
    console.log(result);
    if(result.status === "Not Logged In"){
        //redirect to login screen
        window.open("./login.html","_self");
    }else{
            if(result.admin == "0"){
                window.open("./dashBoard.html","_self");
            }
    }
    })
    .catch(error =>{console.log(error);});
  }
  function loadData(){
    var rawData = "{\"load\":\"loadbyparent\",\"id\":\"master\"} ";
    var requestOptionsData = {
    method: 'POST',
    headers: myHeaders,
    redirect: 'follow',
    body : rawData
    };
    fetch("../../ws/Accessconfig.php ", requestOptionsData)
    .then(response => response.json())
    .then(result => {
        const data = [];
        const idValues = [];
        console.log(result);
        if(result.length > 0){
            for( var i in result){
            console.log(result[i].ContentName);
            var item = result[i].ContentName;
            var id = result[i].id;
            idValues.push(id);
            data.push(item);
            }
            var HTMLData = '';
        for (var i in data) {
            HTMLData = HTMLData + `<div class="card text-right " style="margin-bottom: 10px; ">
                        <div class="card-body py-1 ">
                            <h3 style="display: inline; float: left ">` +
                data[i] + `</h3>
                            <a  href="#" id="` + data[i] + `Btn "  onclick="openAddForm('`+data[i]+`',`+idValues[i]+`,'`+data[i]+`','add')" style="cursor: pointer; ">
                                <span class="material-icons onlyAdmin">
                                add
                                </span></a>
                            <a href="#" id="` + data[i] + `Btn0 " onclick="openListView('`+data[i]+`')" style="cursor: pointer; margin-left: 20px; ">
                                <span class="material-icons ">
                                border_all
                                </span></a>
                        </div>
                    </div>`
    
        }
        }
    
        
        document.getElementById("dbFields ").innerHTML = HTMLData;
    })
    .catch(error => console.log('error', error));
  }
  

function loadMembers(){
    var activeCount = 0;
    var incativeCount = 0;
    //fetch member details
    var memeberBody = {
        load : "loadallMemdata"
    }
    memeberBody = JSON.stringify(memeberBody);
    var memeberRequestOptions = {
        method : "POST",
        headers : myHeaders,
        redirect : "follow",
        body : memeberBody
    }
    fetch("../../ws/Memberprofile.php",memeberRequestOptions)
    .then(response => response.json())
    .then(result =>{
        console.log(result);
        if(Array.isArray(result)){
            var totalMembers = result.length;
            for(var i in result){
                console.log(result[i].status);
                if(result[i].status == "1"){
                    activeCount++;
                }
            }
            incativeCount = totalMembers - activeCount;
        }
        var activeMembers = document.getElementById('activeMembers');
        activeMembers.innerHTML = activeCount;
        var inactiveMembers = document.getElementById('inactiveMembers');
        inactiveMembers.innerHTML = incativeCount;
    })
    .catch(error =>{
        console.log(error);
    });
    
}
auth();
adminRedirect();
loadMembers();
loadData();
function openListView(id){
    console.log("button clicked");
    document.getElementById("dash-section").style.display="none";
    document.getElementById("list-view").style.display="block";
    var listHTML = '';
    var raw = "{\"load\":\"loadbyparent\",\"id\":\""+id+"\"} ";
    var requestOptions = {
        method: 'POST',
        headers: myHeaders,
        redirect: 'follow',
        body : raw
    }
    var listViewTitle = `<h3 class="card-title">`+id+`</h3>`;
    document.getElementById("list-view-title").innerHTML = listViewTitle;
    fetch("../../ws/Accessconfig.php",requestOptions)
    .then(
        response => response.json()
    )
    .then(result =>{
            var listData = [];
            var idValues = [];
            var activeStatus = [];
            console.log(result);
            if(result.length){
                for(var i in result){
                    listData.push(result[i].ContentName);
                    idValues.push(result[i].id);
                    
                }
                for(var i in listData){
                    var activeIconClass;
                    var inactiveIconClass;
                    if(result[i].status == 1){
                        activeIconClass = "active";
                        inactiveIconClass = "inactive";
                    }else if(result[i].status == 0){
                        activeIconClass = "inactive";
                        inactiveIconClass = "active";
                    }
                    console.log(listData[i]);
                    console.log(activeIconClass);
                    console.log(inactiveIconClass);
                    listHTML = listHTML + `
                    <div class="card text-right " style="margin-bottom: 10px; ">
                        <div class="card-body py-1 ">
                            <h3 style="display: inline; float: left ">`+ listData[i]+`</h3>
                            <a href="# " style="cursor: pointer; margin-left: 20px; " onclick="openAddForm('`+listData[i]+`',`+idValues[i]+`,'`+id+`','update')">
                                <span class="material-icons onlyAdmin">
                                edit
                                </span></a>
                            <a href="# "  style="cursor: pointer; margin-left: 20px; " >
                            <span id="active-`+listData[i]+`" class="material-icons `+activeIconClass+`" onclick="changeStatus('`+listData[i]+`',1)">
                            thumb_up
                            </span></a>
                            <a href="# " style="cursor: pointer; margin-left: 20px; " >
                            <span id="inactive-`+listData[i]+`" class="material-icons `+inactiveIconClass+`" onclick="changeStatus('`+listData[i]+`',0)"">
                            thumb_down
                            </span></a>
                        </div>
                    </div>`;
                }
                document.getElementById("dbFieldData").innerHTML = listHTML;
            }else{
                    
            }
                
    })
    .catch(error =>{
        console.log(error);
    })

}
function changeStatus(id,status){
    var activeTarget = `active-`+id+``;
    var inactiveTarget = `inactive-`+id+``;
    var activeClassList = document.getElementById(activeTarget).classList;
    var inActiveClassList = document.getElementById(inactiveTarget).classList;
    if(status == 1){
        if(activeClassList.contains("inactive")){
            activeClassList.remove("inactive");
            activeClassList.add("active");
        }
        if(inActiveClassList.contains("active")){
            inActiveClassList.remove("active");
            inActiveClassList.add("inactive");
        }
    }else if(status == 0){
        if(activeClassList.contains("active")){
            activeClassList.remove("active");
            activeClassList.add("inactive");
        }
        if(inActiveClassList.contains("inactive")){
            inActiveClassList.remove("inactive");
            inActiveClassList.add("active");
        }
    }

    //updating status
    //fetch data
    var fetchFormBody = {
        load : "loadbyname",
        id : id
    }
    fetchFormBody = JSON.stringify(fetchFormBody);
    var fetchFormRequestOptions = {
        method : "POST",
        headers : myHeaders,
        redirect : "follow",
        body : fetchFormBody
    }
    fetch("../../ws/Accessconfig.php",fetchFormRequestOptions)
    .then( response => response.json())
    .then( result =>{
        console.log(result);
        var formValues = result[0];
        var data = {
            load : "update",
            Alias_Name: formValues.Alias_Name,
            ContentName: formValues.ContentName,
            access_to: formValues.access_to,
            content: formValues.content,
            createdby: formValues.createdby,
            createddate: formValues.createddate,
            header: formValues.header,
            iconpath: formValues.iconpath,
            id: formValues.id,
            imagepath: formValues.imagepath,
            parent_id: formValues.parent_id,
            status: status,
            updatedby: formValues.updatedby,
            updateddate: formValues.updateddate,
            urlredirection: formValues.urlredirection,
            videopath: formValues.videopath
        };
        data = JSON.stringify(data);
        console.log(data);
        var updateRequestOptions = {
            headers : myHeaders,
            method : "POST",
            redirect : "follow",
            body : data
        }
        fetch("../../ws/Accessconfig.php", updateRequestOptions)
        .then(response =>{console.log(response)});
    })
    .catch( error =>{
        console.log(error);
    })
    //get object ready
    //send data back

}
function openAddForm(id,number,parentName,action){
    document.getElementById("addForm").style.display="block";
    document.getElementById("dash-section").style.display="none";
    document.getElementById("form").reset();
    var heading = `<h2 class="card-title">`+parentName+` Form</h2>`;
    document.getElementById("form_heading").innerHTML = heading;
    var parentId = number;
    var selfId = 0;
    if(action === "update"){
        document.getElementById("list-view").style.display = "none";
        //get data from database
        var fetchDataBody = {
            load : "loadbyname",
            id : id
        }
        fetchDataBody = JSON.stringify(fetchDataBody);
        var fetchRequestOptions = {
            method: 'POST',
            headers: myHeaders,
            redirect: 'follow',
            body : fetchDataBody
        }
        //change save button to update
        document.getElementById("save-btn").innerHTML = "update";
        //remove reset button
        document.getElementById("reset-btn").display = "block";
        fetch("../../ws/Accessconfig.php", fetchRequestOptions)
        .then( response => response.json())
        .then( result => {
            console.log(result[0]);
            formValues = result[0];
            //add data to form
            selfId = formValues.id;
            parentId = formValues.parent_id;
            document.getElementById("contentName").value = formValues.ContentName;
            document.getElementById("aliasName").value = formValues.Alias_Name;
            document.getElementById("urlColumn").value = formValues.urlredirection;
            document.getElementById("header").value = formValues.header;
            document.getElementById("content").value = formValues.content;
            if(formValues.status == 0){
                document.getElementById("radio2").checked = true;
            }else if(formValues.status == 1){
                document.getElementById("radio1").checked = true;
            }

        })
        .catch(error =>{
            console.log(error);
        })
    }
    var saveBtn = document.getElementById("save-btn");
    saveBtn.addEventListener("click",(event)=>{
        event.preventDefault();
        console.log("clicked save")
        var id = saveBtn.dataset.id;
        onFormSubmit(id,selfId,parentId,action,event);
        
    });
}

function openDashSection(){
    document.getElementById("dash-section").style.display = "block";
    document.getElementById("addForm").style.display = "none";
    document.getElementById("list-view").style.display = "none";
    document.getElementById("dbFieldData").innerHTML = `<div class="card text-right " style="margin-bottom: 10px; ">
                <div class="card-body py-1 ">
                    <h3 style="display: inline; float: left ">No Data</h3>
                    <a href="# " style="cursor: pointer; margin-left: 20px; ">
                        <span class="material-icons ">
                        edit
                        </span></a>
                </div>
            </div>`;
}
function onFormSubmit(id,selfId,parentId,action,event){
    console.log(event);
    var load = "";
    //date
    var d = new Date();
    var date = ``+d.getFullYear()+`-`+d.getMonth()+`-`+d.getDate()+``;
    var videoUrl = "";
    var iconUrl = "";
    var imageUrl = "";
    var createDate = "";
    var updateDate  ="";
    var updatedBy = "";
    var createdBy = "";
    var emptyImageUrl = "";

    if(action === "update"){
        //do update actions
        load = "update"
        updateDate = date;
        updatedBy = "admin";
    }
    else if(action === "add"){
        //do add actions
        load = "addEntry"
        //set create date
        createDate = date;
        //set created by
        createdBy = "admin";
    }
    
    var status = 0;
    if(document.getElementById("radio1").checked){
        status = 1;
    }
 
    let formdata = new FormData();
    var date = new Date();
    date = date.getTime();
    //uploadig files if exists
    if(emptyImagePath.files.length > 0){
        var newEmptyImageName = date + emptyImagePath.files[0].name;
        formdata.set("file" , emptyImagePath.files[0] , newEmptyImageName);
        fetch("../../ws/upload.php" , {method : "POST" , body : formdata});
        emptyImageUrl = `../../uploads/`+newEmptyImageName;
    }
    if(videoPath.files.length > 0){
        
        var newVideoName = date + videopath.files[0].name;
        formdata.set("file" , videoPath.files[0] , newVideoName);
        fetch("../../ws/upload.php" , {method : "POST" , body : formdata});
        videoUrl = `../../uploads/`+newVideoName;
    }
    if(iconPath.files.length > 0){
        var newIconName = date + iconPath.files[0].name;
        formdata.set("file" , iconPath.files[0] , newIconName);
        fetch("../../ws/upload.php" , {method : "POST" , body : formdata});
        iconUrl = `../../uploads/`+ newIconName;
    }
    if(imagePath.files.length > 0){
        var newImageName = date + imagePath.files[0].name;
        formdata.set("file" , imagePath.files[0] , newImageName);
        fetch("../../ws/upload.php" , {method : "POST" , body : formdata});
        imageUrl = `../../uploads/`+ newImageName;
    }
    //getting object ready
    var data={
        id : selfId,
        load: load,
        ContentName : document.getElementById("contentName").value,
        Alias_Name: document.getElementById("aliasName").value,
        parent_id: parentId,
        access_to: 0,
        urlredirection: document.getElementById("urlColumn").value,
        iconpath: iconUrl,
        header: document.getElementById("header").value,
        content: document.getElementById("content").value,
        imagepath: imageUrl,
        videopath: videoUrl,
        createdby: "admin",
        createddate: date,
        updatedby: "",
        updateddate: date,
        emptystateimg : emptyImageUrl,
        status: status
    };
    console.log(data);
    data = JSON.stringify(data);
    var requestOptions = {
        method: 'POST',
        headers: myHeaders,
        redirect: 'follow',
        body : data
    }
    fetch("../../ws/Accessconfig.php",requestOptions).then(response =>{console.log(response);location.reload()}).catch(error =>{console.log(error)});
}

</script>

</html>
