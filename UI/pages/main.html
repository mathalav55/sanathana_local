<!DOCTYPE html>
<!-- saved from url=(0128)https://www.pixinvent.com/demo/frest-clean-bootstrap-admin-dashboard-template/html/ltr/horizontal-menu-template/form-layout.html -->
<html class="loaded" lang="en" data-textdirection="ltr">
<!-- BEGIN: Head-->

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
    <meta name="description" content="Frest admin is super flexible, powerful, clean &amp; modern responsive bootstrap 4 admin template with unlimited possibilities.">
    <meta name="keywords" content="admin template, Frest admin template, dashboard template, flat admin template, responsive admin template, web app">
    <meta name="author" content="PIXINVENT">
    <title>Main Page</title>
    <link rel="apple-touch-icon" href="https://www.pixinvent.com/demo/frest-clean-bootstrap-admin-dashboard-template/app-assets/images/ico/apple-icon-120.png">
    <link rel="shortcut icon" type="image/x-icon" href="https://www.pixinvent.com/demo/frest-clean-bootstrap-admin-dashboard-template/app-assets/images/ico/favicon.ico">
    <!-- BEGIN: Vendor CSS-->
    <link rel="stylesheet " type="text/css " href="../../css/vendors.min.css ">
    <!-- END: Vendor CSS-->

    <!-- BEGIN: Theme CSS-->
    <link rel="stylesheet " type="text/css " href="../../css/bootstrap.min.css ">
    <link rel="stylesheet " type="text/css " href="../../css/bootstrap-extended.min.css">
    <link rel="stylesheet " type="text/css " href="../../css/colors.min.css ">
    <link rel="stylesheet " type="text/css " href="../../css/components.min.css ">
    <link rel="stylesheet " type="text/css " href="../../css/dark-layout.min.css ">
    <link rel="stylesheet " type="text/css " href="../../css/semi-dark-layout.min.css ">
    <!-- END: Theme CSS-->

    <!-- BEGIN: Page CSS-->
    <link rel="stylesheet " type="text/css " href="../../css/horizontal-menu.min.css ">
    <!-- END: Page CSS-->

    <!-- BEGIN: Custom CSS-->
    <!-- END: Custom CSS-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons " rel="stylesheet ">

    <link rel="apple-touch-icon " href="../../app-assets/images/ico/apple-icon-120.png ">
    <link rel="shortcut icon " type="image/x-icon " href="../../app-assets/images/ico/favicon.ico ">
    <link href="https://fonts.googleapis.com/css?family=Rubik:300,400,500,600%7CIBM+Plex+Sans:300,400,500,600,700 " rel="stylesheet ">


    <link rel="stylesheet " type="text/css " href="../../app-assets/vendors/css/vendors.min.css ">
    <link rel="stylesheet " type="text/css " href="../../app-assets/vendors/css/charts/apexcharts.css ">
    <link rel="stylesheet " type="text/css " href="../../app-assets/vendors/css/extensions/swiper.min.css ">
    <link rel="stylesheet " href="../../css/font-awesome-4.7.0/css/font-awesome.min.css ">
    <link rel="stylesheet" href="../../app-assets/vendors/css/forms/select/select2.css">


    <link rel="stylesheet " type="text/css " href="../../app-assets/css/bootstrap.css">
    <link rel="stylesheet " type="text/css " href="../../app-assets/css/bootstrap-extended.css">
    <link rel="stylesheet " type="text/css " href="../../app-assets/css/colors.css">
    <link rel="stylesheet " type="text/css " href="../../app-assets/css/components.css">


    <link rel="stylesheet " type="text/css " href="../../app-assets/css/core/menu/menu-types/horizontal-menu.css ">
    <link rel="stylesheet " type="text/css " href="../../app-assets/css/pages/dashboard-ecommerce.css ">





    <link rel="icon " href="../../img/core-img/favicon.png " />


    <link rel="stylesheet " href="../../css/responsive.css " />
    <link href="../../css/custom.css"rel=" stylesheet ">

    <script src="../../js/modernizr.js "></script>
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-app.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
        https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-analytics.js"></script>

    <script>
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        var firebaseConfig = {
            apiKey: "AIzaSyAaX52IZbaEg3gYnMeHRWh5bi-pLEw2-c4",
            authDomain: "sanathana-1558e.firebaseapp.com",
            projectId: "sanathana-1558e",
            storageBucket: "sanathana-1558e.appspot.com",
            messagingSenderId: "69696836774",
            appId: "1:69696836774:web:4edf184e3cfe3608679067",
            measurementId: "G-DRHZRFBMLY"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        firebase.analytics();
    </script>

</head>
<!-- END: Head-->

<style>
    body {
        font-family: Arial, Helvetica, sans-serif;
    }
    /* The Modal (background) */
    .row{
        margin: 0;
    }
</style>

<!-- BEGIN: Body-->

<body style="background-color:  #d4d4d473;">

    <div id="navbar-container">
        
    </div>
    <div class=" row p-1" style="position: fixed;bottom:0;z-index: 999999;">
        <div class="col toast-container">
            
        </div>
      </div>

   <section>
    <div id="dash-section" style="padding-top: 10% ;" >
        <div class="row ">
            <div class="col-6 ">
                <div class="col-12 ">
                    <div class="card text-left " style="margin-bottom: 10px;">
                        <div class="row card-header" style="margin-top : -6%;">
                            <div class="col">
                                <div class="row">
                                    <div class="col">
                                        <a href="./member_form.html">
                                            <div class="livicon-evo" data-options="
                                            name: plus-alt.svg; 
                                            size: 3rem; 
                                            "></div>
                                    </a>
                                    </div>
                                    <div class="col">
                                        <a href="./businessProfiles.html">
                                            <div class="livicon-evo" data-options="
                                            name: thumbnails-big.svg; 
                                            size: 3rem;
                                            "></div>
                                        </a>
                                    </div>
                                </div>
                            </div>
                            <div class="col text-right">
                                <div class="row chip-primary chip">
                                    <div class="col chip-body">
                                        <span class="chip-text" style="font-size: 1.2rem; padding: .4rem;">
                                            Members
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row card-body pb-4">
                            <div class="col p-1 m-1 badge-circle-light-success">
                                <div class="row justify-content-center">
                                    <h4 id="activeMembers">
                                        0
                                    </h4>
                                </div>
                                <div class="row justify-content-center">
                                    <h4>
                                        Active
                                    </h4>
                                </div>
                            </div>
                            <div class="col p-1 m-1 badge-circle-light-danger" >
                                <div class="row justify-content-center">
                                    <h4 id="inactiveMembers">
                                        0
                                    </h4>
                                </div>
                                <div class="row justify-content-center">
                                    <h4>
                                       In Active
                                    </h4>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
            </div>
            <div class="col-6 ">
                <div id="dbFields " class="col-12 ">
                    
                </div>
            </div>
        </div>
       </div>
      
   </section>

   
    <script src="../../js/jquery-2.2.4.min.js "></script>

    <script src="../../js/headroom.js "></script>

    <script src="../../js/popper.min.js "></script>

    <script src="../../js/bootstrap.min.js "></script>

    <script src="../../js/plugins.js "></script>

    <script src="../../js/active.js "></script>

    <script src="../../js/jquery.mobile.custom.min.js "></script>

    <script src="../../js/main.js "></script>

    <script src="../../app-assets/vendors/js/vendors.min.js "></script>
    

    <!-- <script src="../../app-assets/vendors/js/ui/jquery.sticky.js "></script>    -->

    <script src="../../app-assets/js/scripts/configs/horizontal-menu.js "></script>
    <script src="../../app-assets/js/core/app-menu.js "></script>
    <script src="../../app-assets/js/core/app.js "></script>
    <script src="../../app-assets/js/scripts/components.js "></script>
    <script src="../../app-assets/js/scripts/footer.js "></script>
    <script src="../../js/globalFuntions.js"></script>
    <!-- nav bar script -->
    <script>
        $('#navbar-container').load('../components/navbar.html');
        $(document).ready(function() {
            var year = new Date().getFullYear();
            $(".year").text(year);
                         // grab an element
            var myElement = document.querySelector("header");
            // construct an instance of Headroom, passing the element
            var headroom = new Headroom(myElement);
            // initialise
            headroom.init();
        });

        $(document).ready(function() {
            $('[data-toggle="tooltip"]').tooltip();
        });
    </script>     
<script>
var myHeaders = new Headers();
// myHeaders.append("Content-Type ", "text/plain ");
// myHeaders.append("Cookie ", "PHPSESSID=a147dbe2815c8b7145c6f2ca214f3716 "); 
  function adminRedirect(){
    var userData = {};
    var authRequestOptions = {
    method : "POST",
    redirect : "follow",
    headers : myHeaders,
    body : ""
    }
    fetch("../../ws/auth.php",authRequestOptions)
    .then(response => response.json())
    .then(result => {
    console.log(result);
    if(result.status === "Not Logged In"){
        //redirect to login screen
        window.open("./login.html","_self");
    }else{
            if(result.privilige != "Admin" && result.privilige != "Core Member"){
                window.open("./dashBoard.html","_self");
            }
    }
    })
    .catch(error =>{console.log(error);});
  }
  function loadData(){
    var rawData = "{\"load\":\"loadbyparent\",\"id\":\"master\"} ";
    var requestOptionsData = {
    method: 'POST',
    headers: myHeaders,
    redirect: 'follow',
    body : rawData
    };
    fetch("../../ws/Accessconfig.php ", requestOptionsData)
    .then(response => response.json())
    .then(result => {
        const data = [];
        const idValues = [];
        console.log(result);
        if(result.length > 0){
            var HTMLData = "";
            result.forEach(item =>{
                if(item.status == "0"){
                    return
                }
                HTMLData +=  `<div class="row">
                    <div class="col card">
                        <div class="row card-header">
                            <div class="col">
                                <div class="row chip chip-primary">
                                    <div class="col chip-body">
                                        <span class="chip-text" style="font-size: 1.2rem; padding: 0.4rem;">
                                        `+item.ContentName+`
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <div class="col">
                                <div class="row ">
                                    <div class="col">
                                        <a href="#" id="` + item.ContentName + `Btn " class="row justify-content-end" onclick="openAddForm('`+item.ContentName+`','`+item.id+`')">
                                            <div class="livicon-evo" data-options="
                                            name: plus-alt.svg; 
                                            size: 3rem; 
                                            "></div>
                                        </a>
                                    </div>
                                    <div class="col">
                                        <a href="#" id="` + item.ContentName + `Btn0 " onclick="openListView('`+ item.ContentName+`','`+item.id+`')" class="row justify-content-end">
                                            <div class="livicon-evo" data-options="
                                            name: thumbnails-big.svg; 
                                            size: 3rem;
                                            "></div>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>`;
            })
                document.getElementById("dbFields ").innerHTML = HTMLData;
                loadScripts();
        }
    
    })
    .catch(error => console.log('error', error));
  }
  

function loadMembers(){
    var activeCount = 0;
    var incativeCount = 0;
    //fetch member details
    var memeberBody = {
        load : "loadallMemdata"
    }
    memeberBody = JSON.stringify(memeberBody);
    var memeberRequestOptions = {
        method : "POST",
        headers : myHeaders,
        redirect : "follow",
        body : memeberBody
    }
    fetch("../../ws/Memberprofile.php",memeberRequestOptions)
    .then(response => response.json())
    .then(result =>{
        console.log(result);
        if(Array.isArray(result)){
            var totalMembers = result.length;
            for(var i in result){
                console.log(result[i].status);
                if(result[i].status == "1"){
                    activeCount++;
                }
            }
            incativeCount = totalMembers - activeCount;
        }
        var activeMembers = document.getElementById('activeMembers');
        activeMembers.innerHTML = activeCount;
        var inactiveMembers = document.getElementById('inactiveMembers');
        inactiveMembers.innerHTML = incativeCount;
    })
    .catch(error =>{
        console.log(error);
    });
    
}
auth();
adminRedirect();
setInterval(loadMembers,3000);
loadMembers();
loadData();
function openListView(id,parentId){
    window.location = `./mastersView.html?id=`+id+`&parentId=`+parentId+``;
}
function openAddForm(id,parentId){
    window.location = `./mastersAdd.html?id=`+id+`&action=add&parentId=`+parentId+``;
}



</script>
<script>
    function loadScripts(){
        var locations = ["LivIconsEvo.tools.js","LivIconsEvo.defaults.js","LivIconsEvo.min.js"];
        locations.forEach(location =>{
            var script = document.createElement('script');
            script.src = `../../app-assets/fonts/LivIconsEvo/js/`+location;
            var ref = document.querySelector('body');
            ref.appendChild(script);
        });
    }
</script>
</body>
</html>
